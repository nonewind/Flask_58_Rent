<!--
 * @Author: Ziheng
 * @Date: 2021-03-16 10:50:32
 * @LastEditTime: 2021-03-16 10:50:49
-->
# ðŸ•¸ðŸ•¸ðŸ•¸ðŸ•¸éƒ¨ç½²æ•™ç¨‹ðŸ•¸ðŸ•¸ðŸ•¸ðŸ•¸
**çˆ¬è™«å¼ºä¾èµ–äºŽå®šæ—¶ä»»åŠ¡**
### ðŸ•¸ðŸ•¸æœåŠ¡å™¨ç«¯éƒ¨ç½²ðŸ•¸ðŸ•¸
- æ‰¾ä¸ªsshè¿žæŽ¥å·¥å…· è¿žæŽ¥ä¸Šä½ çš„æœåŠ¡å™¨
- å®‰è£…[å®å¡”é¢æ¿](https://www.bt.cn/bbs/thread-19376-1-1.html)
- æ ¹æ®å‘½ä»¤è¡Œ å¤åˆ¶è¾“å‡ºçš„é¢æ¿ç®¡ç†ç½‘å€ ç™»å½•é¢æ¿
- å®‰è£…å®Œæˆè¯·æ‰“å¼€è½¯ä»¶å•†åº—æœç´¢å®‰è£… **Nginx** å’Œ **mongoDB**
- æ·»åŠ ä¸€ä¸ªæ–°çš„ç«™ç‚¹ æ³¨æ„åŸŸåè§£æž æ³¨æ„è¿™é‡Œè®¾ç½®ä¸ºçº¯é™æ€
![img](/img/web.png)
- è¿›å…¥åˆ°åˆšæ‰æ·»åŠ çš„ç«™ç‚¹çš„ç›®å½• åœ¨æœåŠ¡å™¨ä¸Šå…‹éš†æˆ‘çš„é¡¹ç›®æºç 
```
git clone https://github.com/nonewind/Flask_58_Rent.git && cd Flask_58_Rent
```
- æ£€æŸ¥ä¸€ä¸‹æœåŠ¡å™¨ä¸Šçš„Pythonç‰ˆæœ¬ éœ€è¦3.x
-  åœ¨å®å¡”ä¸­è®¾å®šå¥½é¡¹ç›®ç›®å½• å»ºç«‹ä¸€ä¸ªpyè™šæ‹ŸçŽ¯å¢ƒ å¹¶ä¸”å®‰è£…ä¾èµ–åº“
```
python -m venv pyvenv && pyvenv/bin/pip install -r requirements.txt
```
- äº‘éƒ¨ç½² Flask + WSGI + Nginx è¯¦è§£:https://www.cnblogs.com/Ray-liang/p/4173923.html
- åœ¨å®å¡”çš„ç½‘ç«™è®¾ç½®ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹
```
server {
  listen  80; 
  # listen 443; # å¦‚æžœé…ç½®ssl å°±éœ€è¦æ·»åŠ ä¸Šè¿™ä¸€è¡Œ
  server_name xxxxxx.com; #ä½ çš„ç½‘å€åœ°å€
  location / {
    include      uwsgi_params;
    uwsgi_pass   127.0.0.1:8386;  # æŒ‡å‘uwsgi æ‰€åº”ç”¨çš„å†…éƒ¨åœ°å€,æ‰€æœ‰è¯·æ±‚å°†è½¬å‘ç»™uwsgi å¤„ç† æ³¨æ„å®å¡”/æœåŠ¡å™¨ä¾›åº”å•†éœ€è¦æ”¾è¡Œè¿™ä¸ªç«¯å£
    uwsgi_param UWSGI_PYHOME /www/wwwroot/xxxxxx.com/pyvenv; # æŒ‡å‘è™šæ‹ŸçŽ¯å¢ƒç›®å½•
    uwsgi_param UWSGI_CHDIR  /www/wwwroot/xxxxxx.com; # æŒ‡å‘ç½‘ç«™æ ¹ç›®å½•
    uwsgi_param UWSGI_SCRIPT run:app;  # æŒ‡å®šå¯åŠ¨ç¨‹åºï¼Œmainæ˜¯main.pyå‰éƒ¨åˆ†,appæ˜¯ç¨‹åºå†…ç”¨ä»¥å¯åŠ¨çš„ application å˜é‡å
  }
}
```
![img](/img/web_1.png)
åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªconfig.ini åœ¨å†™å®Œé…ç½®ä»¥åŽ **åˆ é™¤æ³¨é‡Š**
```
[uwsgi]
# uwsgi
socket = 127.0.0.1:8386  å¯åŠ¨æ—¶æ‰€ä½¿ç”¨çš„åœ°å€ä¸Žç«¯å£ï¼Œæ³¨æ„æœåŠ¡å™¨æä¾›å•†å’Œå®å¡”çš„ç«¯å£æ”¾è¡Œç­–ç•¥
chdir = /www/wwwroot/xxxxx.com # æŒ‡å‘ç½‘ç«™ç›®å½•
wsgi-file = run.py # python å¯åŠ¨ç¨‹åºæ–‡ä»¶,æ ¹æ®ä½ çš„å®žé™…æƒ…å†µå¡«å†™
callable = app # python ç¨‹åºå†…ç”¨ä»¥å¯åŠ¨çš„ application å˜é‡å,æ ¹æ®ä½ çš„å®žé™…æƒ…å†µå¡«å†™
processes = 1  # å¤„ç†å™¨æ•°,æ ¹æ®ä½ çš„å®žé™…æƒ…å†µå¡«å†™
threads = 2  # çº¿ç¨‹æ•°
stats = 127.0.0.1:9191 #çŠ¶æ€æ£€æµ‹åœ°å€ï¼Œæ³¨æ„æœåŠ¡å™¨æä¾›å•†å’Œå®å¡”çš„ç«¯å£æ”¾è¡Œç­–ç•¥
```
- å¯åŠ¨é¡¹ç›®å¹¶è®°å½•ç½‘ç«™æ—¥å¿— ~~ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ—¥å¿—è®°å½•ä¸æˆåŠŸ~~
```
nohup uwsgi config.ini >> /www/wwwroot/website_path/web.log &
```
- åœ¨å®å¡”é¢æ¿ä¸­[æ·»åŠ å®šæ—¶ä»»åŠ¡](https://jingyan.baidu.com/article/f96699bba208f9c84e3c1b80.html)
```
/www/wwwroot/YourDomain/Flask_58_Rent/pyvenv/bin/python /www/wwwroot/YourDomain/Flask_58_Rent/spider/spider-58.py >> /www/wwwroot/YourDomain/Flask_58_Rent/spider/log.log
```
